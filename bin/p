#!/usr/bin/env bash

p_folder="${DOCUMENTATION_HOME}/.p"
p_file="${p_folder}/$1"

if [[ -z "$1" ]];  then
    echo "No argument supplied"
	exit 1
fi
if [[ ! -f "$p_file" ]]; then
	echo "File ${p_file} doesn't exist"
	exit 1
fi

# Go to p folder
cd "$p_folder"

# Update
git pull origin master

# Open
vim -u "$HOME/.vim/vimrc_sec" "$p_file"

# Autocommit
git add "$p_folder"
git commit -m "Autocommit p $(date +'%d/%m/%Y %T')"

exit 0
